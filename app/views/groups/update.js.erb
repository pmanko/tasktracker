<%# Step 1: Hide Modal %>
$('#sticky-modal-new').modal('hide');

<% stickies = @group.stickies %>

<%# Step 2: Remove existing stickies from view %>
<% stickies.each do |sticky| %>
  removeSticky("<%= sticky.id %>");
<% end %>

<%# Step 3: Add Updated Tasks to View %>
<% stickies.each do |sticky| %>
  list_element_with_header =      "<%=j render 'stickies/day_list',                stickies: [sticky], completed: sticky.completed, due_date: sticky.due_date %>";
  list_element =                  "<%=j render 'stickies/list_sticky_show',        sticky: sticky %>";

  month_element_with_header =     "<%=j render 'stickies/month_header_with_tags',  stickies: [sticky], tag_ids: sticky.tag_ids, current_date: sticky.due_date %>";
  month_element =                 "<%=j render 'stickies/popup',                   sticky: sticky %>";

  addOrUpdateSticky("<%= sticky.id %>", "<%= sticky.due_date ? sticky.due_date.strftime('%Y%m%d') : 'none' %>", "<%= sticky.completed %>", <%= sticky.tag_ids.to_json %>, list_element, list_element_with_header, month_element, month_element_with_header);
<% end %>
